<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta charset="utf-8">
  <title>
    Cat-DNS: a DNS server that resolves everything to cats &ndash; Alex Stephen
  </title>

  <!-- Begin Jekyll SEO tag v2.1.0 -->
<meta property="og:title" content="Cat-DNS: a DNS server that resolves everything to cats" />
<meta name="description" content="The internet needs more cats. DNS servers are the authority on all things internet. Therefore, the best DNS server is the one that resolves everything to cats. Guess what kind of DNS server this is (Hint: it‚Äôs the cat kind)." />
<meta property="og:description" content="The internet needs more cats. DNS servers are the authority on all things internet. Therefore, the best DNS server is the one that resolves everything to cats. Guess what kind of DNS server this is (Hint: it‚Äôs the cat kind)." />
<link rel="canonical" href="http://localhost:4000/posts/go-cat-dns-go/" />
<meta property="og:url" content="http://localhost:4000/posts/go-cat-dns-go/" />
<meta property="og:site_name" content="Alex Stephen" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-02-18T00:00:00-08:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@rambleraptor" />
<meta name="twitter:creator" content="@rambleraptor" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Cat-DNS: a DNS server that resolves everything to cats",
"datePublished": "2014-02-18T00:00:00-08:00",
"description": "The internet needs more cats. DNS servers are the authority on all things internet. Therefore, the best DNS server is the one that resolves everything to cats. Guess what kind of DNS server this is (Hint: it‚Äôs the cat kind).",
"url": "http://localhost:4000/posts/go-cat-dns-go/"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link rel="alternate" type="application/rss+xml" href="/atom.xml" />

  <link rel="stylesheet" href="/css/base.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/css/mobile.css" type="text/css" media="screen, projection" />
  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png" />
  <link rel="icon" type="image/png"  href="/images/favicon.png">

  <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet">

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47334320-2']);
    _gaq.push(['_setDomainName', 'http://localhost:4000']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>
<body>
  <div class="top-line"></div>
  <div class="container">
    <header class="sidebar">
    <a href="/"><h1 class="avatar">Alex's Rambles</h1></a>

      <div class="sidebar-text">
        <section class="meta">
          <a href="https://github.com/rambleraptor" target="_blank" title="Peep at my GitHub" aria-label="Peep at my GitHub">
            <svg viewBox="0 0 18 18" style="display: inline-block; width: 16px; height: 16px;"><g><path d="M8 0C3.58 0 0 3.582 0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.083-.202-.358-1.015.077-2.117 0 0 .672-.215 2.2.82.638-.178 1.323-.266 2.003-.27.68.004 1.364.092 2.003.27 1.527-1.035 2.198-.82 2.198-.82.437 1.102.163 1.915.08 2.117.513.56.823 1.274.823 2.147 0 3.073-1.87 3.75-3.653 3.947.287.246.543.735.543 1.48 0 1.07-.01 1.933-.01 2.195 0 .215.144.463.55.385C13.71 14.53 16 11.534 16 8c0-4.418-3.582-8-8-8"></path></g></svg>
          </a>
          <a href="https://twitter.com/rambleraptor" target="_blank" title="Follow me on twitter" aria-label="Follow me on Twitter">
            <svg viewBox="0 0 18 18" style="display: inline-block; width: 16px; height: 16px;"><g><path d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.375-1.337.648-2.085.795-.598-.638-1.45-1.036-2.396-1.036-1.812 0-3.282 1.468-3.282 3.28 0 .258.03.51.085.75C5.152 5.39 2.733 4.084 1.114 2.1.83 2.583.67 3.147.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.416-.02-.617-.058.418 1.304 1.63 2.253 3.067 2.28-1.124.88-2.54 1.404-4.077 1.404-.265 0-.526-.015-.783-.045 1.453.93 3.178 1.474 5.032 1.474 6.038 0 9.34-5 9.34-9.338 0-.143-.004-.284-.01-.425.64-.463 1.198-1.04 1.638-1.7z" fill-rule="nonzero"></path></g></svg>
          </a>
          <a href="/atom.xml" title="Atom RSS feed" aria-label="Atom RSS feed" class="og">üìù</a>
        </section>

        <nav class="sections">
          <ul>
            <li><a href="/about">about</a></li>
            <li><a href="/">posts</a></li>
            
              
              <li><a href="/life">life</a></li>
            
              
              <li><a href="/tech">tech</a></li>
            
          </ul>
        </nav>
      </div>
    </header>

    <!-- <link rel="stylesheet" href="/css/scroller.css" type="text/css" media="screen, projection"/> -->
<section class="content">
  <h1>
    <a href="/posts/go-cat-dns-go/">Cat-DNS: a DNS server that resolves everything to cats</a>
  </h1>

  <section class="byline">
    February 18, 2014 ‚ö¨ life, tech
  </section>

  <p>The internet needs more cats. DNS servers are the authority on all things internet. Therefore, the best DNS server is the one that resolves everything to cats. Guess what kind of DNS server this is (Hint: it‚Äôs the cat kind).</p>

<h2 id="making-it-go">Making it go</h2>

<p>First, get the <a href="https://github.com/notwaldorf/cat-dns">code</a>, and the npm packages you need (the instructions are with the code). To run, start the server as a privileged process. This is because to be a DNS server, you need to be a UDP server on port 53. This is a small numbered port, which means it needs superpowers. This is how your run it:</p>

<p><code>
sudo node cat-dns.js
</code></p>

<p>You also need to somehow set your DNS server to be localhost. On a Mac, I do this by creating a new (wi-fi) interface (called Cats), in my Network preferences, and setting its DNS server to <code class="highlighter-rouge">127.0.0.1</code>. You could do this on your normal interface, but this makes switching back and forth easier.</p>

<h2 id="warnings">Warnings</h2>
<p>While you‚Äôre playing with this, pretty much nothing on your computer that requires the internet works. Except for your browser. And then that‚Äôs mostly cats. So being able to deactivate this easily is kind of key (I know. You might think ‚ÄúWhy would I ever want to deactivate cats?‚Äù, but trust me on this one). I also recommend killing all the things that need to call the mothership (google hangouts, twitter feeds, dropbox, iMessage), because they will not like your sassy cat answers, and will slow everything down.</p>

<h2 id="you-are-ready">You are ready</h2>
<p>Go in your browser to <code class="highlighter-rouge">www.google.com</code> and wait a bit. You should see a cat. Go to a different website. Another cat. Congratulations. Your internet is now all cats.</p>

<h2 id="wait-what">Wait, what?</h2>
<p>Do not panic. While I recommend you don‚Äôt look at the source because it‚Äôs gross, if you do look at the source, you‚Äôll notice all it does is resolve any hostname to <code class="highlighter-rouge">54.197.244.191</code>, which is a magical place on the internet that has cats. My friend <a href="https://github.com/cpatulea/cats">@eigma</a> made it, and is hosting it, so please try not to kill all the cat bandwith at once. You could also resolve everything to localhost, and serve your own for now cats on an http server on port 80. But then you‚Äôd have to store your own cats locally, and that is animal cruelty. Thankfully, for now, while that magical static IP exists, you don‚Äôt have to.
That‚Äôs it, that‚Äôs all.</p>

<h2 id="i-need-to-know-more">I NEED TO KNOW MORE</h2>
<p>Here‚Äôs the little <a href="http://notwaldorf.github.io/posts/oops-cat-dns/">summary</a> I wrote originally about how DNS servers work. Basically, cat-dns ends up doing this:</p>

<ul>
  <li>gruesomely parse the query from the client. I used <a href="http://www.zytrax.com/books/dns/ch15/">this</a> as a reference on what each of the fields in the message sections are, because the spec itself is very dry. This was the worst part, because the message sections are sequences of bits that don‚Äôt add up to bytes on any sane boundary, so you have to work with bit arrays, which is nobody‚Äôs idea of fun. Anyway, a spec is a spec.</li>
  <li>assemble the DNS answer. The answer is mostly the same for each query ‚Äì the only thing that changes is the content of the query (i.e. the hostname you requested). And you copy that from the query, so it‚Äôs not a big deal.</li>
  <li>always returns <code class="highlighter-rouge">54.197.244.191</code> as the resolved IP, unless you‚Äôre requesting <code class="highlighter-rouge">imgur.com</code>. Then it gives you an actual IP for imgur that I got from <code class="highlighter-rouge">nslookup</code>. Imgur stores our cats, so we need to be able to get to them. :)</li>
</ul>

</section>


    <section class="content">
      <div class="footer">
        <section class="thanks">
          <span>thanks for reading!</span>
        </section>
        <section class="twitter">
                <a href="https://twitter.com/share" class="twitter-share-button" data-via="rambleraptor" title="Tweet at me!" aria-label="Tweet at me!">Tweet</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </section>
      </div>
    </section>
  </div>
</body>
</html>
